<template>
    <lightning-card title="Opportunity File Uploader">
        <div class="slds-m-around_medium">
            <!-- Textarea for JSON Input -->
            <lightning-textarea
                label="Enter JSON Data"
                value={jsonData}
                onchange={handleJsonChange}
                placeholder="Paste JSON data here"
                required
                message-when-value-missing="JSON data is required."
                class={jsonErrorClass}
            ></lightning-textarea>

            <!-- File Upload for Attachments -->
            <lightning-file-upload
                label="Upload File"
                record-id={recordId}
                onuploadfinished={handleUploadFinished}
                multiple
                accept=".pdf,.docx,.jpg,.png"
            ></lightning-file-upload>
            <template lwc:if={fileErrorMessage}>
                <p class="slds-text-color_error">{fileErrorMessage}</p>
            </template>

            <!-- Button to Submit Data -->
            <lightning-button
                label="Submit"
                variant="brand"
                onclick={handleSubmit}
                class="slds-m-top_medium"
            ></lightning-button>

            <!-- Display Success or Error Message -->
            <template lwc:if={message}>
                <p class="slds-m-top_medium">{message}</p>
            </template>
        </div>
    </lightning-card>
</template>
